<style>
    /* ä¾§è¾¹æ é€‰ä¸­çŠ¶æ€æ ·å¼ */
    .nav-item.active {
        background-color: rgba(79, 70, 229, 0.1);
        border-left: 3px solid #4f46e5;
        font-weight: 600;
    }
    
    .sub-item.active {
        background-color: rgba(79, 70, 229, 0.1);
        border-left: 3px solid #4f46e5;
        font-weight: 600;
    }
    
    /* å­èœå•å±•å¼€/æ”¶èµ·åŠ¨ç”» */
    .sub-menu {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
    }
    
    .sub-menu.open {
        max-height: 200px;
    }
    
    /* å­èœå•é¡¹æ ·å¼ */
    .sub-item {
        padding: 8px 16px 8px 32px;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    .sub-item:hover {
        background-color: rgba(79, 70, 229, 0.05);
    }
</style>

<div class="sidebar">
    <div class="brand">
        <i class="fa-solid fa-layer-group"></i> AI Director
    </div>
    
    <div class="nav-item active" onclick="switchPage('scenes', 'config')">
        <span><i class="fa-solid fa-pen-nib me-2"></i>åˆ†é•œæ‹†è§£</span>
    </div>

    <div class="nav-item" onclick="toggleSubMenu('resSubMenu')">
        <span><i class="fa-solid fa-box-open me-2"></i>èµ„æºåº“</span>
        <i class="fa-solid fa-chevron-down small"></i>
    </div>
    <div class="sub-menu" id="resSubMenu">
        <div class="sub-item active" onclick="switchPage('res-video', 'none')">ğŸ“º è§†é¢‘ç´ æ</div>
        <div class="sub-item" onclick="switchPage('res-sfx', 'none')">ğŸ”Š éŸ³æ•ˆç´ æ</div>
        <div class="sub-item" onclick="switchPage('res-bgm', 'none')">ğŸµ èƒŒæ™¯éŸ³ä¹</div>
    </div>

    <div class="nav-item" onclick="switchPage('projects', 'config')">
        <span><i class="fa-solid fa-folder-open me-2"></i>é¡¹ç›®ç®¡ç†</span>
    </div>

    <div class="nav-item" onclick="switchPage('canvas', 'none')">
        <span><i class="fa-solid fa-image me-2"></i>å°é¢å·¥åŠ</span>
    </div>

    <div class="mt-auto">
        <div class="nav-item" onclick="switchPage('help', 'none')">
            <span><i class="fa-regular fa-circle-question me-2"></i>å¸®åŠ©</span>
        </div>
    </div>
</div>

<script>
    function toggleSubMenu(id) {
        const subMenu = document.getElementById(id);
        if (subMenu) {
            subMenu.classList.toggle('open');
        }
    }
    
    // æ›´æ–°èœå•é¡¹é€‰ä¸­çŠ¶æ€
    function updateActiveNavItem(pageId) {
        // ç§»é™¤æ‰€æœ‰ nav-item çš„ active ç±»
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // ç§»é™¤æ‰€æœ‰ sub-item çš„ active ç±»
        document.querySelectorAll('.sub-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // æ ¹æ® pageId è®¾ç½®å¯¹åº”çš„ active ç±»
        if (pageId === 'scenes') {
            document.querySelectorAll('.nav-item')[0].classList.add('active');
        } else if (pageId === 'projects') {
            document.querySelectorAll('.nav-item')[2].classList.add('active');
        } else if (pageId === 'canvas') {
            document.querySelectorAll('.nav-item')[3].classList.add('active');
        } else if (pageId === 'help') {
            document.querySelectorAll('.nav-item')[4].classList.add('active');
        } else if (pageId.startsWith('res-')) {
            // èµ„æºåº“å­é¡¹
            document.querySelectorAll('.nav-item')[1].classList.add('active');
            const resType = pageId.split('-')[1];
            if (resType === 'video') {
                document.querySelectorAll('.sub-item')[0].classList.add('active');
            } else if (resType === 'sfx') {
                document.querySelectorAll('.sub-item')[1].classList.add('active');
            } else if (resType === 'bgm') {
                document.querySelectorAll('.sub-item')[2].classList.add('active');
            }
        }
    }
</script>